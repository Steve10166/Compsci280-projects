<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CS280 — Project 3: Image Warping & Mosaicing</title>
  <style>
    :root{
      --bg:#f9f9f9; --text:#333; --muted:#666;
      --brand:#16a085; --brandDark:#0f7c67; --head:#2c3e50;
      --card:#fff; --shadow:0 2px 8px rgba(0,0,0,.12);
      --border:#eee;
    }
    *{box-sizing:border-box}
    body{font-family:Arial,Helvetica,sans-serif;background:var(--bg);color:var(--text);margin:0}
    a{color:var(--brandDark);text-decoration:none}
    a:hover{text-decoration:underline}
    header{padding:28px 20px 10px}
    .wrap{max-width:1400px;margin:0 auto;padding:0 20px 40px}
    h1{color:var(--head);margin:0 0 6px}
    .sub{color:var(--muted);margin:0 0 18px}
    section{background:var(--card);box-shadow:var(--shadow);border-radius:14px;padding:22px;margin:18px 0}
    h2{color:var(--brand);margin:0 0 12px}
    h3{color:var(--head);margin:18px 0 8px}
    p{line-height:1.65}
    .grid{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));margin-top:8px}
    figure{margin:0;background:#fff;border:1px solid var(--border);border-radius:10px;overflow:hidden;box-shadow:var(--shadow)}
    figure img{width:100%;height:auto;display:block}
    figcaption{padding:8px 10px;font-size:.92rem;color:var(--muted)}
    details{background:#fafafa;border:1px solid var(--border);border-radius:10px;padding:12px 14px}
    details>summary{font-weight:600;color:var(--head);cursor:pointer;margin:-4px 0 8px}
    .note{font-size:.92rem;color:var(--muted)}
    code.kbd{background:#f1f1f1;border:1px solid #e5e5e5;padding:2px 6px;border-radius:6px}
    table{width:100%;border-collapse:collapse;margin-top:10px}
    th,td{border:1px solid #e6e6e6;padding:8px 10px;text-align:left;font-size:.95rem}
    th{background:#fbfbfb}
    .toc{display:flex;flex-wrap:wrap;gap:8px}
    .toc a{background:#fff;border:1px solid var(--border);padding:6px 10px;border-radius:999px}

    /* --- New helpers --- */
    .grid-sm{grid-template-columns:repeat(auto-fit,minmax(120px,1fr))}
    .thumb-sm img{max-width:160px;margin:0 auto}
    .group-title{margin:8px 0 4px;color:var(--head);font-weight:700}

    .viz-grid{grid-template-columns:repeat(auto-fit,minmax(420px,1fr))}
    .viz-grid figure img{width:100%}

    .grid-lg{grid-template-columns:repeat(auto-fit,minmax(320px,1fr))}
    .wide-figure img{width:100%;max-width:1650px;margin:0 auto;display:block}

    .sources-row{display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(160px,1fr))}
    .sources-row figure img{max-width:200px;margin:0 auto}
    .mosaic-big{margin-top:12px}
    .mosaic-big img{width:100%;max-width:1000px;margin:0 auto;display:block}
  </style>
</head>
<body>
  <header class="wrap">
    <h1>Project 3 — Image Warping &amp; Mosaicing</h1>
    <p class="sub">First part of a larger project: homographies, warping, resampling, and blending.</p>
  </header>

  <main class="wrap">
    <section id="overview">
      <h2>Overview</h2>
      <p>
        The goal is to register two or more photos and create a mosaic by computing homographies,
        warping with inverse mapping (nearest &amp; bilinear), and compositing with feathered blending.
        I also explore cylindrical/spherical mappings for wide panoramas.
      </p>
    </section>

    <!-- A.1 -->
    <section id="a1">
      <h2>A.1 — Shoot and Digitize Pictures</h2>
      <p class="note">
        I took those images in UCSF.
      </p>

      <div class="group-title">Set 1</div>
      <div class="grid grid-sm">
        <figure class="thumb-sm"><img src="proj3/imgs/set1/IMG_0815.jpeg"></figure>
        <figure class="thumb-sm"><img src="proj3/imgs/set1/IMG_0816.jpeg"></figure>
        <figure class="thumb-sm"><img src="proj3/imgs/set1/IMG_0817.jpeg"></figure>
        <figure class="thumb-sm"><img src="proj3/imgs/set1/IMG_0818.jpeg"></figure>
        <figure class="thumb-sm"><img src="proj3/imgs/set1/IMG_0819.jpeg"></figure>
        <figure class="thumb-sm"><img src="proj3/imgs/set1/IMG_0820.jpeg"></figure>
      </div>

      <div class="group-title" style="margin-top:12px">Set 2</div>
      <div class="grid grid-sm">
        <figure class="thumb-sm"><img src="proj3/imgs/set2/IMG_0824.jpeg"></figure>
        <figure class="thumb-sm"><img src="proj3/imgs/set2/IMG_0825.jpeg"></figure>
        <figure class="thumb-sm"><img src="proj3/imgs/set2/IMG_0826.jpeg"></figure>
        <figure class="thumb-sm"><img src="proj3/imgs/set2/IMG_0827.jpeg"></figure>
        <figure class="thumb-sm"><img src="proj3/imgs/set2/IMG_0828.jpeg"></figure>
        <figure class="thumb-sm"><img src="proj3/imgs/set2/IMG_0829.jpeg"></figure>
      </div>
    </section>

    <!-- A.2 -->
    <section id="a2">
      <h2>A.2 — Recover Homographies</h2>
      <p>
        I collect 8 point correspondences with a ginput tool and solve for the
        projective transform <code>p' = H p</code> using least squares on the linearized system.
      </p>

        <summary>Correspondence Visualizations</summary>
          <figure class="mosaic-big wide-figure">
            <img src="proj3/presentables/Figure_1.png">
          </figure>
          <figure class="mosaic-big wide-figure">
            <img src="proj3/presentables/Figure_2.png">
          </figure>
          <figure class="mosaic-big wide-figure">
            <img src="proj3/presentables/Figure_3.png">
          </figure>

      <details>
        <summary>Recovered Homography Matrices</summary>
        <table>
          <thead><tr><th>Pair</th><th>H (3×3)</th></tr></thead>
          <tbody>
            <tr>
              <td>Set 1</td>
              <td><code>[[ 8.56320774e-01 -1.55462283e-01  5.59340257e+02],
[-4.74560800e-02  7.65622055e-01  1.88891808e+03],
[-1.57380314e-05 -4.76468360e-05  1.00000000e+00]]</code></td>
            </tr>
            <tr>
              <td>Set 2</td>
              <td><code>[[ 2.06477882e+00 -1.51254859e-02 -3.94211469e+03],
[ 4.05099059e-01  1.67525372e+00 -1.97870641e+03],
[ 1.78947495e-04  6.34220915e-06  1.00000000e+00]]</code></td>
            </tr>
            <tr>
              <td>Set 3</td>
              <td><code>[[ 5.78011973e-01  3.25671424e-01  1.82080468e+03],
[-1.76598583e-01  1.12855687e+00 -1.57016522e+03],
[-1.21380720e-04  8.82600218e-05  1.00000000e+00]]</code></td>
            </tr>
          </tbody>
        </table>
      </details>

      <details>
        <summary>System of Equations \(A\,h=b\)</summary>
        <table>
          <thead>
            <tr>
              <th>Set</th>
              <th>Equation</th>
            </tr>
          </thead>
          <tbody>
            <tr>
                <td>Set 1</td>
                <td><code>[[-1.96037650e+03 -1.48187793e+03 -1.00000000e+00  0.00000000e+00
                    0.00000000e+00  0.00000000e+00  4.41845548e+06  3.33997662e+06
                    2.25388107e+03]
                  [ 0.00000000e+00  0.00000000e+00  0.00000000e+00 -1.96037650e+03
                   -1.48187793e+03 -1.00000000e+00  6.38467367e+06  4.82627037e+06
                    3.25686095e+03]
                  [-2.96180273e+03 -1.49986763e+03 -1.00000000e+00  0.00000000e+00
                    0.00000000e+00  0.00000000e+00  9.58829610e+06  4.85554787e+06
                    3.23731760e+03]
                  [ 0.00000000e+00  0.00000000e+00  0.00000000e+00 -2.96180273e+03
                   -1.49986763e+03 -1.00000000e+00  9.64617964e+06  4.88486030e+06
                    3.25686095e+03]
                  [-3.91525644e+03 -1.45189511e+03 -1.00000000e+00  0.00000000e+00
                    0.00000000e+00  0.00000000e+00  1.66192472e+07  6.16291783e+06
                    4.24474039e+03]
                  [ 0.00000000e+00  0.00000000e+00  0.00000000e+00 -3.91525644e+03
                   -1.45189511e+03 -1.00000000e+00  1.27984020e+07  4.74603326e+06
                    3.26885408e+03]
                  [-3.22565156e+03 -5.04437965e+02 -1.00000000e+00  0.00000000e+00
                    0.00000000e+00  0.00000000e+00  1.12935429e+07  1.76612127e+06
                    3.50116642e+03]
                  [ 0.00000000e+00  0.00000000e+00  0.00000000e+00 -3.22565156e+03
                   -5.04437965e+02 -1.00000000e+00  7.39130347e+06  1.15587627e+06
                    2.29141411e+03]
                  [-8.33022428e+02 -4.02496373e+02 -1.00000000e+00  0.00000000e+00
                    0.00000000e+00  0.00000000e+00  1.04332297e+06  5.04108530e+05
                    1.25245484e+03]
                  [ 0.00000000e+00  0.00000000e+00  0.00000000e+00 -8.33022428e+02
                   -4.02496373e+02 -1.00000000e+00  1.85385134e+06  8.95736319e+05
                    2.22545190e+03]
                  [-1.19431285e+02 -2.23744503e+03 -1.00000000e+00  0.00000000e+00
                    0.00000000e+00  0.00000000e+00  4.35880397e+04  8.16585394e+05
                    3.64963333e+02]
                  [ 0.00000000e+00  0.00000000e+00  0.00000000e+00 -1.19431285e+02
                   -2.23744503e+03 -1.00000000e+00  4.82074145e+05  9.03125510e+06
                    4.03641430e+03]
                  [-5.39190781e+02 -1.84167179e+03 -1.00000000e+00  0.00000000e+00
                    0.00000000e+00  0.00000000e+00  4.26348607e+05  1.45624560e+06
                    7.90719393e+02]
                  [ 0.00000000e+00  0.00000000e+00  0.00000000e+00 -5.39190781e+02
                   -1.84167179e+03 -1.00000000e+00  1.96623339e+06  6.71590963e+06
                    3.64663762e+03]
                  [-1.44467198e+03 -2.16548626e+03 -1.00000000e+00  0.00000000e+00
                    0.00000000e+00  0.00000000e+00  2.40713812e+06  3.60817168e+06
                    1.66621777e+03]
                  [ 0.00000000e+00  0.00000000e+00  0.00000000e+00 -1.44467198e+03
                   -2.16548626e+03 -1.00000000e+00  5.71867474e+06  8.57198848e+06
                    3.95845896e+03]]</code></td>
              </tr>
              <tr>
                <td>Set 2</td>
                <td><code>[[-2.24221502e+03 -3.22687813e+03 -1.00000000e+00  0.00000000e+00
                    0.00000000e+00  0.00000000e+00  1.00656448e+06  1.44859474e+06
                    4.48915232e+02]
                  [ 0.00000000e+00  0.00000000e+00  0.00000000e+00 -2.24221502e+03
                   -3.22687813e+03 -1.00000000e+00  6.83198702e+06  9.83223698e+06
                    3.04698120e+03]
                  [-2.87785083e+03 -3.35280597e+03 -1.00000000e+00  0.00000000e+00
                    0.00000000e+00  0.00000000e+00  3.62163541e+06  4.21934338e+06
                    1.25845140e+03]
                  [ 0.00000000e+00  0.00000000e+00  0.00000000e+00 -2.87785083e+03
                   -3.35280597e+03 -1.00000000e+00  8.95858676e+06  1.04370952e+07
                    3.11294341e+03]
                  [-2.45809133e+03 -1.71574394e+03 -1.00000000e+00  0.00000000e+00
                    0.00000000e+00  0.00000000e+00  1.86995997e+06  1.30522916e+06
                    7.60736572e+02]
                  [ 0.00000000e+00  0.00000000e+00  0.00000000e+00 -2.45809133e+03
                   -1.71574394e+03 -1.00000000e+00  3.15616792e+06  2.20300032e+06
                    1.28399132e+03]
                  [-2.89584052e+03 -2.09352749e+03 -1.00000000e+00  0.00000000e+00
                    0.00000000e+00  0.00000000e+00  3.83529060e+06  2.77269629e+06
                    1.32441361e+03]
                  [ 0.00000000e+00  0.00000000e+00  0.00000000e+00 -2.89584052e+03
                   -2.09352749e+03 -1.00000000e+00  5.17690195e+06  3.74260476e+06
                    1.78770271e+03]
                  [-4.67682010e+03 -1.95560651e+03 -1.00000000e+00  0.00000000e+00
                    0.00000000e+00  0.00000000e+00  1.43550962e+07  6.00256561e+06
                    3.06941380e+03]
                  [ 0.00000000e+00  0.00000000e+00  0.00000000e+00 -4.67682010e+03
                   -1.95560651e+03 -1.00000000e+00  8.05227059e+06  3.36704694e+06
                    1.72174050e+03]
                  [-4.56888194e+03 -3.13692966e+03 -1.00000000e+00  0.00000000e+00
                    0.00000000e+00  0.00000000e+00  1.35032350e+07  9.27112999e+06
                    2.95547908e+03]
                  [ 0.00000000e+00  0.00000000e+00  0.00000000e+00 -4.56888194e+03
                   -3.13692966e+03 -1.00000000e+00  1.27432008e+07  8.74930129e+06
                    2.78912894e+03]
                  [-2.94381304e+03 -2.82510832e+03 -1.00000000e+00  0.00000000e+00
                    0.00000000e+00  0.00000000e+00  4.00474263e+06  3.84325757e+06
                    1.36039299e+03]
                  [ 0.00000000e+00  0.00000000e+00  0.00000000e+00 -2.94381304e+03
                   -2.82510832e+03 -1.00000000e+00  7.57517462e+06  7.26971740e+06
                    2.57325262e+03]
                  [-5.48035971e+03 -4.03641430e+03 -1.00000000e+00  0.00000000e+00
                    0.00000000e+00  0.00000000e+00  2.00092346e+07  1.47372737e+07
                    3.65108053e+03]
                  [ 0.00000000e+00  0.00000000e+00  0.00000000e+00 -5.48035971e+03
                   -4.03641430e+03 -1.00000000e+00  1.91304393e+07  1.40900202e+07
                    3.49072695e+03]]</code></td>
              </tr>
              <tr>
                <td>Set 3</td>
                <td><code>[[-8.21029299e+02 -3.59866511e+03 -1.00000000e+00  0.00000000e+00
                    0.00000000e+00  0.00000000e+00  2.33299118e+06  1.02257665e+07
                    2.84154436e+03]
                  [ 0.00000000e+00  0.00000000e+00  0.00000000e+00 -8.21029299e+02
                   -3.59866511e+03 -1.00000000e+00  1.57114676e+06  6.88651552e+06
                    1.91363056e+03]
                  [-2.87335083e+02 -3.44875100e+03 -1.00000000e+00  0.00000000e+00
                    0.00000000e+00  0.00000000e+00  7.04478871e+05  8.45553626e+06
                    2.45176768e+03]
                  [ 0.00000000e+00  0.00000000e+00  0.00000000e+00 -2.87335083e+02
                   -3.44875100e+03 -1.00000000e+00  5.17115753e+05  6.20670283e+06
                    1.79969584e+03]
                  [-3.18967217e+03 -3.65263419e+03 -1.00000000e+00  0.00000000e+00
                    0.00000000e+00  0.00000000e+00  1.65996621e+07  1.90090047e+07
                    5.20419067e+03]
                  [ 0.00000000e+00  0.00000000e+00  0.00000000e+00 -3.18967217e+03
                   -3.65263419e+03 -1.00000000e+00  6.73504758e+06  7.71259983e+06
                    2.11151718e+03]
                  [-1.16883002e+03 -2.99900868e+03 -1.00000000e+00  0.00000000e+00
                    0.00000000e+00  0.00000000e+00  3.61565887e+06  9.27713364e+06
                    3.09340006e+03]
                  [ 0.00000000e+00  0.00000000e+00  0.00000000e+00 -1.16883002e+03
                   -2.99900868e+03 -1.00000000e+00  1.66898274e+06  4.28231106e+06
                    1.42790886e+03]
                  [-2.78790237e+03 -2.83710145e+03 -1.00000000e+00  0.00000000e+00
                    0.00000000e+00  0.00000000e+00  1.33218091e+07  1.35569038e+07
                    4.77843461e+03]
                  [ 0.00000000e+00  0.00000000e+00  0.00000000e+00 -2.78790237e+03
                   -2.83710145e+03 -1.00000000e+00  3.52948892e+06  3.59177504e+06
                    1.26600162e+03]
                  [-3.17168248e+03 -3.05897433e+03 -1.00000000e+00  0.00000000e+00
                    0.00000000e+00  0.00000000e+00  1.66201555e+07  1.60295457e+07
                    5.24017005e+03]
                  [ 0.00000000e+00  0.00000000e+00  0.00000000e+00 -3.17168248e+03
                   -3.05897433e+03 -1.00000000e+00  4.81416147e+06  4.64308657e+06
                    1.51785732e+03]
                  [-2.75791955e+03 -2.02156872e+03 -1.00000000e+00  0.00000000e+00
                    0.00000000e+00  0.00000000e+00  1.33439186e+07  9.78115857e+06
                    4.83840025e+03]
                  [ 0.00000000e+00  0.00000000e+00  0.00000000e+00 -2.75791955e+03
                   -2.02156872e+03 -1.00000000e+00  7.29677656e+05  5.34857344e+05
                    2.64575396e+02]
                  [-3.35757597e+03 -2.24943816e+03 -1.00000000e+00  0.00000000e+00
                    0.00000000e+00  0.00000000e+00  1.90439113e+07  1.27586393e+07
                    5.67192268e+03]
                  [ 0.00000000e+00  0.00000000e+00  0.00000000e+00 -3.35757597e+03
                   -2.24943816e+03 -1.00000000e+00  1.53261743e+06  1.02679080e+06
                    4.56465451e+02]]</code></td>
              </tr>
          </tbody>
        </table>
      </details>
    </section>

    <!-- A.3 -->
    <section id="a3">
      <h2>A.3 — Warp the Images</h2>
      <p>
        I implement <b>inverse warping</b> with two interpolation methods:
        <code>warpImageNearestNeighbor(im,H)</code> and <code>warpImageBilinear(im,H)</code>.
        I also perform planar rectification by mapping a clicked quadrilateral to a square.
      </p>
      <h3>Rectification Examples</h3>
      <figure class="mosaic-big wide-figure">
        <img src="proj3/presentables/rctify.png">
      </figure>
      <figure class="mosaic-big wide-figure">
        <img src="proj3/presentables/rectify.png">
      </figure>
      <figure class="mosaic-big wide-figure">
        <img src="proj3/presentables/rectify3.png">
      </figure>
      <p class="note">Nearest is faster but jaggier; bilinear is smoother, better for mosaics.</p>
    </section>

    <!-- A.4 -->
    <section id="a4">
      <h2>A.4 — Blend the Images into a Mosaic</h2>
      <p>
        I blend warped images into a single mosaic using alpha-weighted averaging, a straightforward and order-independent compositing technique. Each warped image is stored as an RGBA layer where valid pixels have an alpha value of 1 and transparent regions have 0. When adding a new image, its RGB values (premultiplied by alpha) are accumulated onto the existing canvas, while a parallel weight map tracks how many images contribute to each pixel. The final mosaic is normalized by dividing the accumulated color by the total weights, producing smooth transitions and consistent brightness across overlaps. To align the images before blending, I manually select corresponding feature points between each new image and a fixed reference using a point-clicking tool. These correspondences are used to compute the homography matrix through a least-squares SVD solution of the linearized projective equations, enabling accurate warping of each image into the shared reference frame for seamless mosaicing.
      </p>

      <h3>Mosaic Results</h3>

      <div class="sources-row">
        <figure><img src="proj3/imgs/set1/IMG_0815.jpeg"><figcaption>Set 1 — source</figcaption></figure>
        <figure><img src="proj3/imgs/set1/IMG_0816.jpeg"><figcaption>Set 1 — source</figcaption></figure>
        <figure><img src="proj3/imgs/set1/IMG_0817.jpeg"><figcaption>Set 1 — source</figcaption></figure>
      </div>
      <figure class="mosaic-big wide-figure">
        <img src="proj3/mosaic_set1_out/step_02_IMG_0817.png">
        <figcaption>Set 1 — mosaic</figcaption>
      </figure>

      <div class="sources-row">
        <figure><img src="proj3/mosaic_cyl_set2_out/IMG_0845.jpeg"><figcaption>Set 2 — source</figcaption></figure>
        <figure><img src="proj3/mosaic_cyl_set2_out/IMG_0846.jpeg"><figcaption>Set 2 — source</figcaption></figure>
      </div>
      <figure class="mosaic-big wide-figure">
        <img src="proj3/mosaic_set2_out/step_01_IMG_0846.png">
        <figcaption>Set 2 — mosaic</figcaption>
      </figure>

      <div class="sources-row">
        <figure><img src="proj3/imgs/set3/IMG_0843.jpeg"><figcaption>Set 3 — source</figcaption></figure>
        <figure><img src="proj3/imgs/set3/IMG_0844 2.jpeg"><figcaption>Set 3 — source</figcaption></figure>

      </div>
      <figure class="mosaic-big wide-figure">
        <img src="proj3/mosaic_set2_out/step_01_IMG_0844 2.png">
        <figcaption>Set 3 — mosaic</figcaption>
      </figure>
    </section>

    <!-- A.5 -->
    <section id="a5">
      <h2>A.5 — Bells &amp; Whistles (Mandatory for CS280A)</h2>
      <p>
        For the cylindrical mapping part, I pre-warp each input image onto a cylindrical surface before stitching so that rotations around the camera’s optical axis become horizontal translations in cylindrical space. This remaps each pixel according to its projected angle and height on the cylinder, using a fixed focal length or field of view to preserve scale consistency. The cylindrical projection removes much of the perspective distortion present in planar mosaics and ensures that vertical lines remain straight and scene geometry looks natural even across wide sweeps. After mapping, the warped images are aligned with homographies in cylindrical coordinates and composited using the same alpha-weighted blending, producing smooth, concave panoramas that better approximate the true geometry of rotating the camera about a single point.
      </p>
      <div class="sources-row">
        <figure><img src="proj3/imgs/set2/IMG_0824.jpeg"><figcaption>Cyl Set 1 — source</figcaption></figure>
        <figure><img src="proj3/imgs/set2/IMG_0827.jpeg"><figcaption>Cyl Set 1 — source</figcaption></figure>
        <figure><img src="proj3/imgs/set2/IMG_0831.jpeg"><figcaption>Cyl Set 1 — source</figcaption></figure>
      </div>
      <figure class="mosaic-big wide-figure">
        <img src="proj3/mosaic_cyl_set2_out/mosaic_cyl_final.png">
        <figcaption>Set 1 — Cylindrical mosaic</figcaption>
      </figure>
      <div class="sources-row">
        <figure><img src="proj3/mosaic_cyl_set2_out/IMG_0845.jpeg"><figcaption>Cyl Set 2 — source</figcaption></figure>
        <figure><img src="proj3/mosaic_cyl_set2_out/IMG_0846.jpeg"><figcaption>Cyl Set 2 — source</figcaption></figure>
    </div>
      <figure class="mosaic-big wide-figure">
        <img src="proj3/mosaic_cyl_set2_out/step_01_IMG_0846_cyl.png">
        <figcaption>Set 2 — Cylindrical mosaic</figcaption>
      </figure>
    </section>
</section>
    
    <!-- Part B -->
    <section id="partB">
      <h2>Part B — Autostitching (Brown et al., simplified)</h2>
      <p class="note">I follow the Brown et al. MOPS pipeline with simplifications: single-scale Harris, axis-aligned MOPS-style 8×8 descriptors sampled from 40×40 windows, Lowe ratio test, and 4-point RANSAC for robust homographies. I also added an unordered panorama recognizer that groups images by pairwise inliers and stitches each group.</p>

      <h3 id="b1">B.1 — Harris + ANMS</h3>
      <p>Harris responses are computed (skimage’s <code>corner_harris</code>), corners are filtered near borders, and then thinned by Adaptive Non-Maximum Suppression (ANMS) to enforce spatial diversity.</p>
      <ul>
        <li>Detector: <code>corner_harris</code> (sigma=1), then discard a 20 px border.</li>
        <li>ANMS: compute suppression radius per point; keep top-N (e.g., N=500) with largest radii for spatial diversity.</li>
        <li>Visualization: overlay raw corners and ANMS-filtered points on the color image.</li>
      </ul>
      <div class="grid grid-lg">
        <figure>
          <img src="proj3/presentables/IMG_0815_before_anms.jpg" alt="Harris corners before ANMS">
          <figcaption>Detected corners — before ANMS</figcaption>
        </figure>
        <figure>
          <img src="proj3/presentables/IMG_0815_after_anms.jpg" alt="Harris corners after ANMS">
          <figcaption>Detected corners — after ANMS</figcaption>
        </figure>
      </div>

      <h3 id="b2">B.2 — Feature Descriptors</h3>
      <p>I implement MOPS-style, axis-aligned descriptors: each corner samples a 40×40 window and is anti-aliased down to 8×8, giving a blurred, robust patch. Patches are then bias/gain-normalized (zero mean, unit variance). Rotation invariance and wavelets are omitted by spec.</p>
      <ul>
        <li>Windowing: 40×40 around each corner; bilinear sampling to 8×8.</li>
        <li>Normalization: subtract patch mean; divide by std (with small epsilon).</li>
        <li>Descriptor: flatten to a 64-D float vector.</li>
      </ul>
      <figure class="mosaic-big wide-figure">
        <img src="proj3/presentables/features.png" alt="Sample 8x8 MOPS-style descriptors">
        <figcaption>Sample normalized 8×8 descriptors (visualized)</figcaption>
      </figure>

      <h3 id="b3">B.3 — Feature Matching</h3>
      <p>Matches are found via SSD in descriptor space with Lowe’s ratio test (k=2). I optionally apply a mutual check and an absolute distance cap for stringency.</p>
      <figure class="mosaic-big wide-figure">
        <img src="proj3/presentables/matches_0815_0816.png" alt="Matched features between two images">
        <figcaption>Matched features between an image pair (lines drawn across a concatenated view)</figcaption>
      </figure>

      <h3 id="b4">B.4 — RANSAC Homography & Mosaics</h3>
      <p>I implemented a 4-point RANSAC: randomly sample 4 correspondences, estimate a homography with DLT, score inliers by reprojection error, keep the best model, and refit on inliers. Using the homography that maps the second image to the first, I warp with bilinear interpolation and alpha-weighted blending (premultiplied) on a dynamically expanding canvas.</p>
      <div class="grid viz-grid">
        <figure>
          <img src="proj3/mosaic_set1_out/step_02_IMG_0817.png" alt="Set 1 — A4 mosaic">
          <figcaption>Set 1 — A4 mosaic (reference)</figcaption>
        </figure>
        <figure>
          <img src="proj3/presentables/compare1.jpg" alt="Set 1 — automatic mosaic (this part)">
          <figcaption>Set 1 — automatic mosaic (this part)</figcaption>
        </figure>
      </div>
      
      <div class="grid viz-grid">
        <figure>
          <img src="proj3/mosaic_set2_out/step_01_IMG_0846.png" alt="Set 2 — A4 mosaic">
          <figcaption>Set 2 — A4 mosaic (reference)</figcaption>
        </figure>
        <figure>
          <img src="proj3/presentables/compare_offi.jpg" alt="Set 2 — automatic mosaic (this part)">
          <figcaption>Set 2 — automatic mosaic (this part)</figcaption>
        </figure>
      </div>
      
      <div class="grid viz-grid">
        <figure>
          <img src="proj3/mosaic_set2_out/step_01_IMG_0844 2.png" alt="Set 3 — A4 mosaic">
          <figcaption>Set 3 — A4 mosaic (reference)</figcaption>
        </figure>
        <figure>
          <img src="proj3/presentables/compare_meeting.jpg" alt="Set 3 — automatic mosaic (this part)">
          <figcaption>Set 3 — automatic mosaic (this part)</figcaption>
        </figure>
      </div>
      
      <ul>
        <li>Model: 4-point RANSAC with DLT; reprojection error threshold tuned to the downsampled resolution.</li>
        <li>Refit: homography recomputed on inliers after selection.</li>
        <li>Warp &amp; blend: inverse-mapped bilinear resampling; alpha-weighted, order-independent compositing on an expanding canvas.</li>
      </ul>

      <h3 id="b5">B.5 — Bells &amp; Whistles</h3>
      <p><b>Panorama recognition from an unordered set:</b> I compute pairwise matches/inliers across all images in a unordered directory, build a connectivity graph using a minimum inlier threshold, choose a reference (highest degree) per connected component, and chain homographies to that reference to stitch each group. Below are three automatically built panoramas.</p>
      <ul>
        <li>Pairwise graph: edges kept if inliers ≥ 20 under 4-point RANSAC.</li>
        <li>Reference choice: highest-degree image in each connected component.</li>
        <li>Pose chaining: BFS to accumulate homographies to the reference; warp each to the common canvas.</li>
      </ul>
      <div class="grid grid-lg">
        <figure>
          <img src="proj3/presentables/automosaic1.jpg" alt="Automatic panorama 1">
          <figcaption>Automatic mosaic 1</figcaption>
        </figure>
        <figure>
          <img src="proj3/presentables/automosaic2.jpg" alt="Automatic panorama 2">
          <figcaption>Automatic mosaic 2</figcaption>
        </figure>
        <figure>
          <img src="proj3/presentables/automosaic3.jpg" alt="Automatic panorama 3">
          <figcaption>Automatic mosaic 3</figcaption>
        </figure>
      </div>
    </section>
  </main>
</body>
</html>